[[["platform","v1"],["platform","ext"],["import","\"file\""],["import","\"switch\""],["invoke",["stdin"],"setRawMode","1"],["def","readkey",{"code":[[["invoke",["stdin"],"resume"],["invoke",["stdin"],"on","data",["js-bridge",{"code":[[["invoke",["stdin"],"pause"],["call","Callback","Data"]]],"_fndef":true,"_fnparams":["Data"]}]]]],"_fndef":true,"_fnparams":["Callback"]}],["def","inc",{"code":[[["+","V","1"]]],"_fndef":true,"_fnparams":["V"]}],["def","dec",{"code":[[["-","V","1"]]],"_fndef":true,"_fnparams":["V"]}],["def","prog",{"code":[[["index","BfProg","X"]]],"_fndef":true,"_fnparams":["X"]}],["def","bracket-open",{"code":[[["var","BracketOpenInner",["scope",{"code":[[["var","Y",["-",["length","BfProg"],"Ip"]],["if",["<","X","Y"],[["var","Ch",["prog",["+","Ip","X"]],["if",["==","Ch","\"]\""],[["call","BracketOpenInner",["dec","OpenBraces"],["inc","X"]]],["else",[["if",["==","Ch","\"]\""],[["call","BracketOpenInner",["inc","OpenBraces"],["inc","X"]]],["else",[["if",["==","0","OpenBrces"],[["if",["==",["stack-peek"],"Ip"],[["stack-pop"]],["else",[["call","BracketOpenInner","OpenBraces",["inc","X"]]]]]]]]]]]]]]]]]],"_fndef":true,"_fnparams":["OpenBraces","X"]}]],["call","BracketOpenInner","1","1"]]],"_fndef":true,"_fnparams":[]}],["def","stack-push",{"code":[[["invoke","Stack","push","N"]]],"_fndef":true,"_fnparams":["N"]}],["def","stack-pop",{"code":[[["invoke","Stack","pop"]]],"_fndef":true,"_fnparams":[]}],["def","stack-peek",{"code":[[["?",[">",["length","Stack"],"0"],["index","Stack",["-",["length","Stack"],"1"]],"nil"]]],"_fndef":true,"_fnparams":[]}],["def","mem",{"code":[[["var","V",["dict-get","Mem","Ptr"]],["?",["==","V",["undefined"]],"0","V"]]],"_fndef":true,"_fnparams":["Ptr"]}],["var","Source","\"+<<---[[<+>->++++>---<<]>++]<<<++.<+++.<..<-.<<++.<-.>>>.<.>>.>-.<<<<+.\""],["var","Stack",["list"]],["var","BfProg",["split","Source","\"\""]],["var","Mem",["dict"]],["var","Ptr","0"],["var","Ip","0"],["var","Len",["length","BfProg"]],["var","CasePtrInc",["case","\">\"",["scope",{"code":[[["set","Ptr",["inc","Ptr"]]]],"_fndef":true,"_fnparams":[]}]]],["var","CasePtrDec",["case","\"<\"",["scope",{"code":[[["set","Ptr",["dec","Ptr"]]]],"_fndef":true,"_fnparams":[]}]]],["var","CaseMemInc",["case","\"+\"",["scope",{"code":[[["var","I",["mem","Ptr"]],["dict-set","Mem","Ptr",["inc","I"]]]],"_fndef":true,"_fnparams":[]}]]],["var","CaseMemDec",["case","\"-\"",["scope",{"code":[[["var","I",["mem","Ptr"]],["dict-set","Mem","Ptr",["dec","I"]]]],"_fndef":true,"_fnparams":[]}]]],["var","CaseWrite",["case","\".\"",["scope",{"code":[[["var","I",["mem","Ptr"]],["print","I"]]],"_fndef":true,"_fnparams":[]}]]],["var","CaseRead",["case","\",\"",["scope",{"code":[[["readkey",["scope",{"code":[[["dict-set","Mem","Ptr",["index","Key","0"]]]],"_fndef":true,"_fnparams":["Key"]}]]]],"_fndef":true,"_fnparams":[]}]]],["var","CaseBracketOpen",["case","\"[\"",["scope",{"code":[[["if",["==","0",["mem","Ptr"]],[["bracket-open"]],["else",[["stack-push","Ip"]]]]]],"_fndef":true,"_fnparams":[]}]]],["var","CaseBracketClose",["case","\"]\"",["scope",{"code":[[["if",["==","0",["mem","Ptr"]],[["stack-pop"]],["else",[["set","Ip",["stack-peek"]]]]]]],"_fndef":true,"_fnparams":[]}]]],["var","SwitchCases",["list","CasePtrInc","CasePtrDec","CaseMemInc","CaseMemDec","CaseWrite","CaseRead","CaseBracketOpen","CaseBracketClose"]],["def","execute-contents",{"code":[[["set","BfProg",["get","FileData"]],["set","Len",["length","BfProg"]],["set","Ip","0"],["set","Ptr","0"],["print","\"Loaded \"","Len","\" bytes\""],["execution-loop"]]],"_fndef":true,"_fnparams":["FileData"]}],["var","ExecutionCond",{"code":[[["<","Ip","Len"]]],"_fndef":true,"_fnparams":[]}],["var","ExecutionAction",{"code":[[[["switch",["prog","Ip"],"SwitchCases"],["set","Ip",["inc","Ip"]]]]],"_fndef":true,"_fnparams":[]}],["def","execution-loop",{"code":[[["while","ExecutionCond","ExecutionAction"]]],"_fndef":true,"_fnparams":[]}],["if",["!=","false",["get-def","'FILE'"]],[["var","File",["+","\"\"",["get-def","'FILE'"]]],["read-file","File",["scope",{"code":[[["if",["==",["null"],"Err"],[["print","File","\" loaded, starting execution\""],["execute-contents","Data"]]]]],"_fndef":true,"_fnparams":["Err","Data"]}]]],["else",[["execution-loop"]]]]]]